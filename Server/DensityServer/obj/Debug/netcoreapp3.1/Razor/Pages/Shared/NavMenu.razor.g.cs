#pragma checksum "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b32b5b47deb637e2b5ecb6663dad04081fc36e7a"
// <auto-generated/>
#pragma warning disable 1591
namespace DensityServer.Pages.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.AspNetCore.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using DensityServer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using DensityServer.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using DensityServer.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\_Imports.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
using DensityServer.Server.Services;

#line default
#line hidden
#nullable disable
    public partial class NavMenu : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "bg-light");
            __builder.AddAttribute(2, "id", "sidebar-wrapper");
            __builder.AddMarkupContent(3, "\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "menu list-group list-group-flush");
            __builder.AddMarkupContent(6, "\n\n        ");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(7);
            __builder.AddAttribute(8, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(9, "\n                ");
                __builder2.OpenElement(10, "div");
                __builder2.AddAttribute(11, "align", "center");
                __builder2.AddMarkupContent(12, "\n");
#nullable restore
#line 10 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                     if (chatting)
                    {

#line default
#line hidden
#nullable disable
                __builder2.AddContent(13, "    ");
                __builder2.OpenElement(14, "div");
                __builder2.AddContent(15, "Hello ");
                __builder2.AddContent(16, 
#nullable restore
#line 12 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                context.User.Identity.Name

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(17, "\n                        ");
                __builder2.OpenElement(18, "span");
                __builder2.AddContent(19, "Connected as ");
                __builder2.OpenElement(20, "b");
                __builder2.AddContent(21, 
#nullable restore
#line 13 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                               username

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(22, "\n                                            ");
                __builder2.OpenElement(23, "button");
                __builder2.AddAttribute(24, "class", "btn btn-info");
                __builder2.AddAttribute(25, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 14 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                                    DisconnectAsync

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddContent(26, "  Disconnect");
                __builder2.CloseElement();
#nullable restore
#line 14 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                                                                          }

#line default
#line hidden
#nullable disable
                __builder2.AddContent(27, "                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(28, "\n\n                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(29);
                __builder2.AddAttribute(30, "class", "list-group-item list-group-item-action bg-light");
                __builder2.AddAttribute(31, "href", "/");
                __builder2.AddAttribute(32, "Match", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.Routing.NavLinkMatch>(
#nullable restore
#line 17 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                                                 NavLinkMatch.All

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(33, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(34, "\n                    <span class=\"oi oi-home\" aria-hidden=\"true\"></span> Home\n                ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(35, "\n\n                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(36);
                __builder2.AddAttribute(37, "class", "list-group-item list-group-item-action bg-light");
                __builder2.AddAttribute(38, "href", "/Employee/Register");
                __builder2.AddAttribute(39, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(40, "\n                    <span class=\"oi oi-list-rich\" aria-hidden=\"true\"></span> Manage Employees\n                ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(41, "\n\n                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(42);
                __builder2.AddAttribute(43, "class", "list-group-item list-group-item-action bg-light");
                __builder2.AddAttribute(44, "href", "/Airports");
                __builder2.AddAttribute(45, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(46, "\n                    <span class=\"oi oi-list-rich\" aria-hidden=\"true\"></span> Manage Airports\n                ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(47, "\n\n                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(48);
                __builder2.AddAttribute(49, "class", "list-group-item list-group-item-action bg-light");
                __builder2.AddAttribute(50, "href", "/Airport/Register");
                __builder2.AddAttribute(51, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(52, "\n                    <span class=\"oi oi-list-rich\" aria-hidden=\"true\"></span> Add Airport\n                ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(53, "\n\n                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(54);
                __builder2.AddAttribute(55, "class", "list-group-item list-group-item-action bg-light");
                __builder2.AddAttribute(56, "href", "/Identity/Account/Logout");
                __builder2.AddAttribute(57, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(58, "\n                    <span class=\"oi oi-list-rich\" aria-hidden=\"true\"></span> Log Out\n\n                    (");
                    __builder3.AddContent(59, 
#nullable restore
#line 37 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                      context.User.Claims.FirstOrDefault(c =>
                                             c.Type == "http://schemas.microsoft.com/2012/01/devicecontext/claims/displayname")?.Value

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddMarkupContent(60, ")\n\n                ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(61, "\n\n                ");
                __builder2.OpenElement(62, "footer");
                __builder2.AddMarkupContent(63, "\n                    ");
                __builder2.OpenElement(64, "div");
                __builder2.AddAttribute(65, "class", "container");
                __builder2.AddMarkupContent(66, "\n\n");
#nullable restore
#line 45 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                         if (!chatting)
                        {

#line default
#line hidden
#nullable disable
                __builder2.AddContent(67, "        ");
                __builder2.AddMarkupContent(68, "<p>\n            Enter a username to chat:\n        </p>\n                            ");
                __builder2.OpenElement(69, "section");
                __builder2.AddMarkupContent(70, "\n                                ");
                __builder2.OpenElement(71, "input");
                __builder2.AddAttribute(72, "type", "text");
                __builder2.AddAttribute(73, "maxlength", "20");
                __builder2.AddAttribute(74, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 51 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                          username

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(75, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => username = __value, username));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(76, "\n                                ");
                __builder2.OpenElement(77, "button");
                __builder2.AddAttribute(78, "type", "button");
                __builder2.AddAttribute(79, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 52 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                 Chat

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(80, "class", "btn btn-outline-danger");
                __builder2.AddAttribute(81, "aria-hidden", "true");
                __builder2.AddContent(82, " Login");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(83, "\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(84, "\n");
#nullable restore
#line 54 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                 if (message != null)
                                                {

#line default
#line hidden
#nullable disable
                __builder2.AddContent(85, "                            ");
                __builder2.OpenElement(86, "div");
                __builder2.AddAttribute(87, "class", "invalid-feedback");
                __builder2.AddContent(88, 
#nullable restore
#line 56 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                           message

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
#nullable restore
#line 56 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 56 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                         }

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(89, "\n");
#nullable restore
#line 58 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                         if (chatting)
                        {

#line default
#line hidden
#nullable disable
                __builder2.AddContent(90, "        ");
                __builder2.OpenElement(91, "chat");
                __builder2.AddMarkupContent(92, "\n            ");
                __builder2.OpenElement(93, "div");
                __builder2.AddAttribute(94, "align", "center");
                __builder2.AddMarkupContent(95, "\n\n");
#nullable restore
#line 63 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                 foreach (var item in messages)
                {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(96, "section");
                __builder2.AddMarkupContent(97, "\n    ");
                __builder2.OpenElement(98, "text");
                __builder2.AddAttribute(99, "class", "user");
                __builder2.AddContent(100, 
#nullable restore
#line 66 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                        item.Username

#line default
#line hidden
#nullable disable
                );
                __builder2.AddContent(101, " :");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(102, "\n    ");
                __builder2.OpenElement(103, "text");
                __builder2.AddAttribute(104, "class", "msg");
                __builder2.AddContent(105, 
#nullable restore
#line 67 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                       item.Body

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(106, "\n");
                __builder2.CloseElement();
#nullable restore
#line 68 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
          }

#line default
#line hidden
#nullable disable
                __builder2.AddContent(107, "            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(108, "\n\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(109, "\n");
                __builder2.AddContent(110, "                            ");
                __builder2.OpenElement(111, "div");
                __builder2.AddMarkupContent(112, "\n                                <hr>\n                                ");
                __builder2.OpenElement(113, "textarea");
                __builder2.AddAttribute(114, "class", "input-lg");
                __builder2.AddAttribute(115, "placeholder", "Say anything");
                __builder2.AddAttribute(116, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 75 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                                              newMessage

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(117, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => newMessage = __value, newMessage));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(118, "\n                                ");
                __builder2.OpenElement(119, "button");
                __builder2.AddAttribute(120, "class", "btn btn-outline-danger");
                __builder2.AddAttribute(121, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 76 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                                                                  SendAsync

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddContent(122, "  Send");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(123, "\n                            ");
                __builder2.CloseElement();
#nullable restore
#line 77 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                                  }

#line default
#line hidden
#nullable disable
                __builder2.AddContent(124, "                        ");
                __builder2.OpenElement(125, "p");
                __builder2.AddContent(126, 
#nullable restore
#line 78 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
                            DateTime.Now.Year

#line default
#line hidden
#nullable disable
                );
                __builder2.AddContent(127, " - KaurAI");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(128, "\n\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(129, "\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(130, "\n\n            ");
            }
            ));
            __builder.AddAttribute(131, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(132, "\n                ");
                __builder2.AddMarkupContent(133, "<a href=\"Identity/Account/Register\">Register</a>\n                ");
                __builder2.AddMarkupContent(134, "<a href=\"Identity/Account/Login\">Log in</a>\n            ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(135, "\n\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(136, "\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 96 "C:\Users\danny\source\repos\Density_Android\Server\DensityServer\Pages\Shared\NavMenu.razor"
        bool collapseNavMenu = true;
    string NavMenuCssClass => collapseNavMenu ? "collapse" : null;
    void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    bool chatting = false;
    string username = null;
    ChatClient client = null;
    string message = null;
    string newMessage = null;
    List<Message> messages = new List<Message>();


    async Task Chat()
    {
        if (string.IsNullOrWhiteSpace(username))
        {
            message = "Please enter a name";
            return;
        };

        try
        {

            messages.Clear();

            client = new ChatClient(username, navigationManager);
            client.MessageReceived += MessageReceived;
            Console.WriteLine("Index: chat starting...");
            await client.StartAsync();
            Console.WriteLine("Index: chat started?");

            chatting = true;
        }
        catch (Exception e)
        {
            message = $"ERROR: Failed to start chat client: {e.Message}";
            Console.WriteLine(e.Message);
            Console.WriteLine(e.StackTrace);
        }
    }


    void MessageReceived(object sender, MessageReceivedEventArgs e)
    {
        Console.WriteLine($"Blazor: receive {e.Username}: {e.Message}");
        bool isMine = false;
        if (!string.IsNullOrWhiteSpace(e.Username))
        {
            isMine = string.Equals(e.Username, username, StringComparison.CurrentCultureIgnoreCase);
        }

        var newMsg = new Message(e.Username, e.Message, isMine);
        messages.Add(newMsg);

        // inform viewcontroller that the UI needs updating
        StateHasChanged();
    }

    async Task DisconnectAsync()
    {
        if (chatting)
        {
            await client.StopAsync();
            client = null;
            message = "chat ended";
            chatting = false;
        }
    }

    async Task SendAsync()
    {
        if (chatting && !string.IsNullOrWhiteSpace(newMessage))
        {
            await client.SendAsync(newMessage);
            newMessage = "";
        }
    }

    class Message
    {
        public Message(string username, string body, bool mine)
        {
            Username = username;
            Body = body;
            Mine = mine;
        }

        public string Username { get; set; }
        public string Body { get; set; }
        public bool Mine { get; set; }


        public string CSS
        {
            get
            {
                return Mine ? "sent" : "received";
            }
        }
    } 

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager navigationManager { get; set; }
    }
}
#pragma warning restore 1591
